import{_ as D,r as H,o as s,c as h,y as t,s as a,K as o,av as O,P as g,V as m,W as v,aU as K,aV as x,a4 as T,L as u,H as C,J as k,S as b,T as F,a2 as V,z as r,A as d,D as _,B as w,F as j,E as $,a6 as L,Q as I,X as z}from"./app-CgYTy_-w.js";import{a as E,V as S}from"./VTabs-DAJbFL7o.js";import{V as N}from"./VOtpInput-DAF9Fvcb.js";const Q={name:"account-setting",computed:{tabTitle:function(){switch(this.tabSelected){case"password":return"Katasandi";case"twofactor":return"Dua Faktor Otentikasi";case"sessions":return"Sesi Browser";default:return"Pengguna"}}},data:()=>({tabSelected:"account",svgQrCode:null,visible:!1}),methods:{confirmTwoFactorAuthentication:function(l){this.$http("account/api/setting/confirmed-factor-authentication",{method:"POST",params:{code:l.otp_two_factor}}).then(()=>{l.confirmed_two_factor=!0}).catch(()=>{l.otp_two_factor=null})},disableTwoFactorAuthentication:function(l){this.$http("account/api/setting/two-factor-authentication",{method:"DELETE"}).then(()=>{l.svg_two_factor=null,l.enabled_two_factor=!1,l.confirmed_two_factor=!1,l.url_two_factor=null})},enableTwoFactorAuthentication:function(l){this.$http("account/api/setting/two-factor-authentication",{method:"POST"}).then(({recovery:i,svg:y,url:A})=>{l.svg_two_factor=y,l.enabled_two_factor=!0,l.recovery_code_two_factor=i,l.url_two_factor=A})},logoutOtherDevices:function(l,i){typeof l=="function"&&l(),this.$http("account/api/setting/logout-other-devices",{method:"POST",params:{password:i.password}}).then(({sessions:y})=>{i.sessions=y})},updateHighlight:function(l,i){i.highlight=l},updatePassword:function(l){this.$http("account/api/setting/update-password",{method:"POST",params:{current_password:l.current_password,password:l.password,password_confirmation:l.password_confirmation}})},updateProfile:function(l){this.$http("account/api/setting/update-profile",{method:"POST",params:l}).then(({auth:i})=>{this.auth=i,this.$storage.setItem("auth",i),this.theme="theme"in this.auth?this.auth.theme:"teal"})},updateTheme:function(l,i){i.theme=l}}},G={class:"d-flex align-center my-4"},M={class:"font-weight-medium text-caption text-uppercase"},R={key:0,class:"text-grey-darken-1"},W=o("p",{class:"text-justify"}," Anda belum mengaktifkan fitur otentifikasi dua langkah ",-1),J=o("p",{class:"mt-3 text-justify"}," Saat fitur otentifikasi dua langkah di aktifkan, Anda akan di minta untuk scan kode QR dan meng-input token keamanan. Anda akan mendapatkan token ini melalui aplikasi Google Authenticator di handphone. ",-1),X=[W,J],q={key:1,class:"text-grey-darken-1"},Y=o("p",{class:"text-justify"}," Silahkan scan QR code di bawah menggunakan aplikasi Google Authenticator di handphone Anda. ",-1),Z=["innerHTML"],aa=o("p",{class:"text-justify"}," Silahkan masukan token dari aplikasi Google Authenticator untuk konfirmasi aktivasi fitur ini. ",-1),ta=o("div",{class:"text-overline text-center"}," token konfirmasi ",-1),ea={key:2,class:"text-grey-darken-1"},la=o("p",null," Fitur otentifikasi dua langkah sekarang telah aktif. ",-1),na=o("p",{class:"mt-3 text-justify"}," Simpan kode pemulihan dibawah ini pada tempat yang aman. Kode ini dapat di gunakan untuk memulihkan kembali akses dua langkah otentifikasi akun Anda jika perangkat hilang. ",-1),oa={class:"d-flex mt-4 justify-center bg-yellow-lighten-5 py-4 rounded-lg"},ia={class:"text-center"},sa=o("div",{class:"text-grey-darken-1 mb-4"},[o("p",null," Jika diperlukan, Anda dapat keluar dari semua sesi di semua device yang pernah terhubung. "),o("p",{class:"mt-3"}," list dibawah ini adalah beberapa sesi terbaru Anda. Daftar ini mungkin tidak lengkap, jika Anda merasa bahwa akun Anda telah disusupi. Anda juga harus meng-update Katasandi. ")],-1),da={class:"d-flex align-center w-100 pb-2"},ua={class:"d-block flex-grow-1 mx-2"},ca={class:"text-caption font-weight-bold"},fa={class:"text-caption",style:{"font-size":"10px !important"}},ra={key:0,class:"text-green"},_a={key:1},pa=o("p",{class:"text-caption text-justify mb-4"}," Untuk menghapus sesi browser yang lain, silahkan masukan katasandi Anda pada input di bawah ini. ",-1),ma={class:"d-flex px-6 pb-6"};function ha(l,i,y,A,ka,c){const B=H("page-blank");return s(),h(B,{"page-name":"account-setting","page-key":"setting",title:"setting","show-sidenav":""},{default:t(({combos:{colors:U},record:n,theme:p,store:P})=>[a(u,null,{default:t(()=>[o("div",G,[a(O,{color:`${p}`,class:"mx-auto",size:"small",variant:"flat"},{default:t(()=>[o("div",M,g(c.tabTitle),1)]),_:2},1032,["color"])]),a(E,{"align-tabs":"center",color:"primary",modelValue:l.tabSelected,"onUpdate:modelValue":i[0]||(i[0]=e=>l.tabSelected=e),stacked:""},{default:t(()=>[a(S,{value:"account"},{default:t(()=>[a(m,{icon:"person"})]),_:1}),a(S,{value:"password"},{default:t(()=>[a(m,{icon:"lock"})]),_:1}),a(S,{value:"twofactor"},{default:t(()=>[a(m,{icon:"encrypted"})]),_:1}),a(S,{value:"sessions"},{default:t(()=>[a(m,{icon:"settings_cinematic_blur"})]),_:1})]),_:1},8,["modelValue"]),a(v),a(K,{modelValue:l.tabSelected,"onUpdate:modelValue":i[2]||(i[2]=e=>l.tabSelected=e)},{default:t(()=>[a(x,{value:"account"},{default:t(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:t(()=>[a(u,null,{default:t(()=>[a(C,null,{default:t(()=>[a(k,{cols:"12"},{default:t(()=>[a(b,{label:"Nama Pengguna",modelValue:n.username,"onUpdate:modelValue":e=>n.username=e,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(k,{cols:"12"},{default:t(()=>[a(F,{items:U,label:"Thema",modelValue:n.theme,"onUpdate:modelValue":[e=>n.theme=e,e=>c.updateTheme(e,P)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),a(k,{cols:"12"},{default:t(()=>[a(F,{items:U,label:"Highlight",modelValue:n.highlight,"onUpdate:modelValue":[e=>n.highlight=e,e=>c.updateHighlight(e,P)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(v),a(u,{class:"d-flex"},{default:t(()=>[a(V),a(r,{color:p,variant:"flat",onClick:e=>c.updateProfile(n)},{default:t(()=>[d("update profile")]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"password"},{default:t(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:t(()=>[a(u,null,{default:t(()=>[a(C,null,{default:t(()=>[a(k,{cols:"12"},{default:t(()=>[a(b,{label:"Saat ini",modelValue:n.current_password,"onUpdate:modelValue":e=>n.current_password=e,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(k,{cols:"12"},{default:t(()=>[a(b,{label:"Sandi Baru",modelValue:n.password,"onUpdate:modelValue":e=>n.password=e,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(k,{cols:"12"},{default:t(()=>[a(b,{label:"Konfirmasi",modelValue:n.password_confirmation,"onUpdate:modelValue":e=>n.password_confirmation=e,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(v),a(u,{class:"d-flex"},{default:t(()=>[a(V),a(r,{color:p,variant:"flat",onClick:e=>c.updatePassword(n)},{default:t(()=>[d("update katasandi")]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"twofactor"},{default:t(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:t(()=>[a(u,null,{default:t(()=>[!n.enabled_two_factor&&!n.confirmed_two_factor?(s(),_("div",R,X)):w("",!0),n.enabled_two_factor&&!n.confirmed_two_factor?(s(),_("div",q,[Y,o("div",{class:"d-flex align-center justify-center py-4",innerHTML:n.svg_two_factor},null,8,Z),aa,ta,a(N,{label:"Konfirmasi",length:"6",modelValue:n.otp_two_factor,"onUpdate:modelValue":e=>n.otp_two_factor=e},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),n.enabled_two_factor&&n.confirmed_two_factor?(s(),_("div",ea,[la,na,o("div",oa,[o("code",ia,[(s(!0),_(j,null,$(n.recovery_code_two_factor,(e,f)=>(s(),_("p",{key:f},g(e),1))),128))])])])):w("",!0)]),_:2},1024),a(v),a(u,{class:"d-flex"},{default:t(()=>[a(V),n.enabled_two_factor&&!n.confirmed_two_factor?(s(),h(r,{key:0,color:p,variant:"flat",onClick:e=>c.confirmTwoFactorAuthentication(n)},{default:t(()=>[d("konfirmasi")]),_:2},1032,["color","onClick"])):w("",!0),n.enabled_two_factor?(s(),h(r,{key:1,color:"deep-orange",class:"ml-2",variant:"flat",onClick:e=>c.disableTwoFactorAuthentication(n)},{default:t(()=>[d("hapus")]),_:2},1032,["onClick"])):w("",!0),n.enabled_two_factor?w("",!0):(s(),h(r,{key:2,color:p,variant:"flat",onClick:e=>c.enableTwoFactorAuthentication(n)},{default:t(()=>[d("Aktifkan Fitur")]),_:2},1032,["color","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"sessions"},{default:t(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:t(()=>[a(u,null,{default:t(()=>[sa,(s(!0),_(j,null,$(n.sessions,(e,f)=>(s(),_("div",{key:f,class:z([{"mt-2":f>0},"d-block text-grey-darken-1"])},[o("div",da,[e.agent.is_mobile?(s(),h(m,{key:0},{default:t(()=>[d("phone_iphone")]),_:1})):e.agent.is_tablet?(s(),h(m,{key:1},{default:t(()=>[d("tablet_mac")]),_:1})):(s(),h(m,{key:2},{default:t(()=>[d("computer")]),_:1})),o("div",ua,[o("div",ca,g(e.agent.platform)+" - "+g(e.agent.browser),1),o("div",fa,[d(" IP: "+g(e.ip_address)+", ",1),e.is_current_device?(s(),_("span",ra,"This device")):(s(),_("span",_a,"Last activity: "+g(e.last_active),1))])]),a(r,{color:p,density:"compact",variant:"flat",rounded:"lg",icon:""},{default:t(()=>[a(m,{size:"small"},{default:t(()=>[d("map")]),_:1})]),_:2},1032,["color"])]),a(v)],2))),128))]),_:2},1024),a(u,{class:"d-flex pt-1"},{default:t(()=>[a(V),a(r,{color:p,variant:"flat"},{default:t(()=>[d(" Hapus Sesi Lainnya "),a(L,{activator:"parent","max-width":"340"},{default:t(({isActive:e})=>[a(I,{"prepend-icon":"delete",title:"Hapus Sesi Lainnya?"},{default:t(()=>[a(u,null,{default:t(()=>[pa,a(C,null,{default:t(()=>[a(k,{cols:"12"},{default:t(()=>[a(b,{"append-inner-icon":l.visible?"visibility":"visibility_off",type:l.visible?"text":"password",label:"Katasandi",placeholder:"Masukan Katasandi",modelValue:n.password,"onUpdate:modelValue":f=>n.password=f,"hide-details":"","onClick:appendInner":i[1]||(i[1]=f=>l.visible=!l.visible)},null,8,["append-inner-icon","type","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o("div",ma,[a(V),a(r,{color:p,text:"Batal",onClick:f=>e.value=!1},null,8,["color","onClick"]),a(r,{color:"deep-orange",class:"ml-2",text:"Hapus",variant:"flat",onClick:f=>c.logoutOtherDevices(()=>e.value=!1,n)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)]),_:1})}const ba=D(Q,[["render",ha]]);export{ba as default};
