import{_ as B,c as k,w as e,r as D,o as s,a,l as i,q as H,t as g,b as _,B as b,aV as K,aW as x,M as T,m as u,j as S,k as h,y as v,z as F,K as V,V as p,d,g as m,e as w,F as P,h as $,O as L,u as I,C as z}from"./app-Bz4LNFaU.js";import{a as N,V as C}from"./VTabs-B5HtK2E3.js";import{V as E}from"./VOtpInput-BQxhcF0I.js";const M={name:"account-setting",computed:{tabTitle:function(){switch(this.tabSelected){case"password":return"Katasandi";case"twofactor":return"Dua Faktor Otentikasi";case"sessions":return"Sesi Browser";default:return"Pengguna"}}},data:()=>({tabSelected:"account",svgQrCode:null,visible:!1}),methods:{confirmTwoFactorAuthentication:function(n){this.$http("account/api/setting/confirmed-factor-authentication",{method:"POST",params:{code:n.otp_two_factor}}).then(()=>{n.confirmed_two_factor=!0}).catch(()=>{n.otp_two_factor=null})},disableTwoFactorAuthentication:function(n){this.$http("account/api/setting/two-factor-authentication",{method:"DELETE"}).then(()=>{n.svg_two_factor=null,n.enabled_two_factor=!1,n.confirmed_two_factor=!1,n.url_two_factor=null})},enableTwoFactorAuthentication:function(n){this.$http("account/api/setting/two-factor-authentication",{method:"POST"}).then(({recovery:t,svg:y,url:A})=>{n.svg_two_factor=y,n.enabled_two_factor=!0,n.recovery_code_two_factor=t,n.url_two_factor=A})},logoutOtherDevices:function(n,t){typeof n=="function"&&n(),this.$http("account/api/setting/logout-other-devices",{method:"POST",params:{password:t.password}}).then(({sessions:y})=>{t.sessions=y})},updateHighlight:function(n,t){t.highlight=n},updatePassword:function(n){this.$http("account/api/setting/update-password",{method:"POST",params:{current_password:n.current_password,password:n.password,password_confirmation:n.password_confirmation}})},updateProfile:function(n){this.$http("account/api/setting/update-profile",{method:"POST",params:n}).then(({auth:t})=>{this.auth=t,this.$storage.setItem("auth",t),this.theme="theme"in this.auth?this.auth.theme:"teal"})},updateTheme:function(n,t){t.theme=n}}},G={class:"d-flex align-center my-4"},Q={class:"font-weight-medium text-caption text-uppercase"},R={key:0,class:"text-grey-darken-1"},W={key:1,class:"text-grey-darken-1"},q=["innerHTML"],J={key:2,class:"text-grey-darken-1"},X={class:"d-flex mt-4 justify-center bg-yellow-lighten-5 py-4 rounded-lg"},Y={class:"text-center"},Z={class:"d-flex align-center w-100 pb-2"},aa={class:"d-block flex-grow-1 mx-2"},ta={class:"text-caption font-weight-bold"},ea={class:"text-caption",style:{"font-size":"10px !important"}},la={key:0,class:"text-green"},na={key:1},oa={class:"d-flex px-6 pb-6"};function ia(n,t,y,A,sa,f){const O=D("page-blank");return s(),k(O,{"page-name":"account-setting","page-key":"setting",title:"setting","show-sidenav":""},{default:e(({combos:{colors:U},record:o,theme:c,store:j})=>[a(u,null,{default:e(()=>[i("div",G,[a(H,{color:`${c}`,class:"mx-auto",size:"small",variant:"flat"},{default:e(()=>[i("div",Q,g(f.tabTitle),1)]),_:2},1032,["color"])]),a(N,{"align-tabs":"center",color:"primary",modelValue:n.tabSelected,"onUpdate:modelValue":t[0]||(t[0]=l=>n.tabSelected=l),stacked:""},{default:e(()=>[a(C,{value:"account"},{default:e(()=>[a(_,{icon:"person"})]),_:1}),a(C,{value:"password"},{default:e(()=>[a(_,{icon:"lock"})]),_:1}),a(C,{value:"twofactor"},{default:e(()=>[a(_,{icon:"encrypted"})]),_:1}),a(C,{value:"sessions"},{default:e(()=>[a(_,{icon:"settings_cinematic_blur"})]),_:1})]),_:1},8,["modelValue"]),a(b),a(K,{modelValue:n.tabSelected,"onUpdate:modelValue":t[2]||(t[2]=l=>n.tabSelected=l)},{default:e(()=>[a(x,{value:"account"},{default:e(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:e(()=>[a(u,null,{default:e(()=>[a(S,null,{default:e(()=>[a(h,{cols:"12"},{default:e(()=>[a(v,{label:"Nama Pengguna",modelValue:o.username,"onUpdate:modelValue":l=>o.username=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(h,{cols:"12"},{default:e(()=>[a(F,{items:U,label:"Thema",modelValue:o.theme,"onUpdate:modelValue":[l=>o.theme=l,l=>f.updateTheme(l,j)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),a(h,{cols:"12"},{default:e(()=>[a(F,{items:U,label:"Highlight",modelValue:o.highlight,"onUpdate:modelValue":[l=>o.highlight=l,l=>f.updateHighlight(l,j)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(b),a(u,{class:"d-flex"},{default:e(()=>[a(V),a(p,{color:c,variant:"flat",onClick:l=>f.updateProfile(o)},{default:e(()=>t[3]||(t[3]=[d("update profile")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"password"},{default:e(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:e(()=>[a(u,null,{default:e(()=>[a(S,null,{default:e(()=>[a(h,{cols:"12"},{default:e(()=>[a(v,{label:"Saat ini",modelValue:o.current_password,"onUpdate:modelValue":l=>o.current_password=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(h,{cols:"12"},{default:e(()=>[a(v,{label:"Sandi Baru",modelValue:o.password,"onUpdate:modelValue":l=>o.password=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(h,{cols:"12"},{default:e(()=>[a(v,{label:"Konfirmasi",modelValue:o.password_confirmation,"onUpdate:modelValue":l=>o.password_confirmation=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(b),a(u,{class:"d-flex"},{default:e(()=>[a(V),a(p,{color:c,variant:"flat",onClick:l=>f.updatePassword(o)},{default:e(()=>t[4]||(t[4]=[d("update katasandi")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"twofactor"},{default:e(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:e(()=>[a(u,null,{default:e(()=>[!o.enabled_two_factor&&!o.confirmed_two_factor?(s(),m("div",R,t[5]||(t[5]=[i("p",{class:"text-justify"}," Anda belum mengaktifkan fitur otentifikasi dua langkah ",-1),i("p",{class:"mt-3 text-justify"}," Saat fitur otentifikasi dua langkah di aktifkan, Anda akan di minta untuk scan kode QR dan meng-input token keamanan. Anda akan mendapatkan token ini melalui aplikasi Google Authenticator di handphone. ",-1)]))):w("",!0),o.enabled_two_factor&&!o.confirmed_two_factor?(s(),m("div",W,[t[6]||(t[6]=i("p",{class:"text-justify"}," Silahkan scan QR code di bawah menggunakan aplikasi Google Authenticator di handphone Anda. ",-1)),i("div",{class:"d-flex align-center justify-center py-4",innerHTML:o.svg_two_factor},null,8,q),t[7]||(t[7]=i("p",{class:"text-justify"}," Silahkan masukan token dari aplikasi Google Authenticator untuk konfirmasi aktivasi fitur ini. ",-1)),t[8]||(t[8]=i("div",{class:"text-overline text-center"}," token konfirmasi ",-1)),a(E,{label:"Konfirmasi",length:"6",modelValue:o.otp_two_factor,"onUpdate:modelValue":l=>o.otp_two_factor=l},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),o.enabled_two_factor&&o.confirmed_two_factor?(s(),m("div",J,[t[9]||(t[9]=i("p",null," Fitur otentifikasi dua langkah sekarang telah aktif. ",-1)),t[10]||(t[10]=i("p",{class:"mt-3 text-justify"}," Simpan kode pemulihan dibawah ini pada tempat yang aman. Kode ini dapat di gunakan untuk memulihkan kembali akses dua langkah otentifikasi akun Anda jika perangkat hilang. ",-1)),i("div",X,[i("code",Y,[(s(!0),m(P,null,$(o.recovery_code_two_factor,(l,r)=>(s(),m("p",{key:r},g(l),1))),128))])])])):w("",!0)]),_:2},1024),a(b),a(u,{class:"d-flex"},{default:e(()=>[a(V),o.enabled_two_factor&&!o.confirmed_two_factor?(s(),k(p,{key:0,color:c,variant:"flat",onClick:l=>f.confirmTwoFactorAuthentication(o)},{default:e(()=>t[11]||(t[11]=[d("konfirmasi")])),_:2},1032,["color","onClick"])):w("",!0),o.enabled_two_factor?(s(),k(p,{key:1,color:"deep-orange",class:"ml-2",variant:"flat",onClick:l=>f.disableTwoFactorAuthentication(o)},{default:e(()=>t[12]||(t[12]=[d("hapus")])),_:2},1032,["onClick"])):w("",!0),o.enabled_two_factor?w("",!0):(s(),k(p,{key:2,color:c,variant:"flat",onClick:l=>f.enableTwoFactorAuthentication(o)},{default:e(()=>t[13]||(t[13]=[d("Aktifkan Fitur")])),_:2},1032,["color","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{value:"sessions"},{default:e(()=>[a(T,{class:"mx-auto","max-width":"400"},{default:e(()=>[a(u,null,{default:e(()=>[t[18]||(t[18]=i("div",{class:"text-grey-darken-1 mb-4"},[i("p",null," Jika diperlukan, Anda dapat keluar dari semua sesi di semua device yang pernah terhubung. "),i("p",{class:"mt-3"}," list dibawah ini adalah beberapa sesi terbaru Anda. Daftar ini mungkin tidak lengkap, jika Anda merasa bahwa akun Anda telah disusupi. Anda juga harus meng-update Katasandi. ")],-1)),(s(!0),m(P,null,$(o.sessions,(l,r)=>(s(),m("div",{key:r,class:z([{"mt-2":r>0},"d-block text-grey-darken-1"])},[i("div",Z,[l.agent.is_mobile?(s(),k(_,{key:0},{default:e(()=>t[14]||(t[14]=[d("phone_iphone")])),_:1})):l.agent.is_tablet?(s(),k(_,{key:1},{default:e(()=>t[15]||(t[15]=[d("tablet_mac")])),_:1})):(s(),k(_,{key:2},{default:e(()=>t[16]||(t[16]=[d("computer")])),_:1})),i("div",aa,[i("div",ta,g(l.agent.platform)+" - "+g(l.agent.browser),1),i("div",ea,[d(" IP: "+g(l.ip_address)+", ",1),l.is_current_device?(s(),m("span",la,"This device")):(s(),m("span",na,"Last activity: "+g(l.last_active),1))])]),a(p,{color:c,density:"compact",variant:"flat",rounded:"lg",icon:""},{default:e(()=>[a(_,{size:"small"},{default:e(()=>t[17]||(t[17]=[d("map")])),_:1})]),_:2},1032,["color"])]),a(b)],2))),128))]),_:2},1024),a(u,{class:"d-flex pt-1"},{default:e(()=>[a(V),a(p,{color:c,variant:"flat"},{default:e(()=>[t[20]||(t[20]=d(" Hapus Sesi Lainnya ")),a(L,{activator:"parent","max-width":"340"},{default:e(({isActive:l})=>[a(I,{"prepend-icon":"delete",title:"Hapus Sesi Lainnya?"},{default:e(()=>[a(u,null,{default:e(()=>[t[19]||(t[19]=i("p",{class:"text-caption text-justify mb-4"}," Untuk menghapus sesi browser yang lain, silahkan masukan katasandi Anda pada input di bawah ini. ",-1)),a(S,null,{default:e(()=>[a(h,{cols:"12"},{default:e(()=>[a(v,{"append-inner-icon":n.visible?"visibility":"visibility_off",type:n.visible?"text":"password",label:"Katasandi",placeholder:"Masukan Katasandi",modelValue:o.password,"onUpdate:modelValue":r=>o.password=r,"hide-details":"","onClick:appendInner":t[1]||(t[1]=r=>n.visible=!n.visible)},null,8,["append-inner-icon","type","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),i("div",oa,[a(V),a(p,{color:c,text:"Batal",onClick:r=>l.value=!1},null,8,["color","onClick"]),a(p,{color:"deep-orange",class:"ml-2",text:"Hapus",variant:"flat",onClick:r=>f.logoutOtherDevices(()=>l.value=!1,o)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)]),_:1})}const ra=B(M,[["render",ia]]);export{ra as default};
