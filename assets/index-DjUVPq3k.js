import{_ as S,r as U,o as u,c as p,y as a,s as t,H as v,J as i,L as c,w as M,v as x,Q as A,R as B,A as _,B as m,S as k,T as E,U as F,W as I,z as g,V as T,K as L}from"./app-CgYTy_-w.js";import{V as b}from"./VCombobox-D8cKNhya.js";import{V as O,a as D}from"./VRadioGroup-C5pjvyuA.js";const j={name:"coperative-report",data:()=>({expand:!1,menuDateStart:!1,menuDateEnd:!1,type_of_options:null,month:new Date().getMonth()+1,year:new Date().getFullYear(),menuDateProcess:!1,render:null}),methods:{downloadPDF:function(n,e,s){this.$http("coperative/api/report-to-pdf",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,orientation:e.orientation,month:e.month,date_process:e.date_process},responseType:"blob"}).then(r=>{const f=new Blob([r],{type:"application/pdf"}),d=document.createElement("a");d.href=URL.createObjectURL(f),d.download=n.value+".pdf",d.click(),URL.revokeObjectURL(d.href)}).catch(()=>{s.$snackbar({text:"there is an error while processing data!"})})},downloadXLS:function(n,e,s){this.$http("coperative/api/report-to-xls",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,month:e.month,date_process:e.date_process},responseType:"blob"}).then(r=>{const f=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a");d.href=URL.createObjectURL(f),d.download=n.value+".xlsx",d.click(),URL.revokeObjectURL(d.href)}).catch(()=>{s.$snackbar({text:"there is an error while processing data!"})})},onReportTypeChange:function(n,e){this.expand=!0,this.render=null,this.expand=n.has_options,this.type_of_options=n.type_of_options,e.date_start=null,e.date_end=null,e.year=null,e.member=null,e.member_id=null,e.month=null,e.date_process=null;let s=new Date;["deposit_pokok","deposit_wajib","deposit_tabungan"].includes(this.type_of_options)&&(e.year=s.getFullYear()),["loan_mutation_month"].includes(this.type_of_options)&&(e.year=s.getFullYear(),e.month=s.getMonth()+1),["loan_age"].includes(this.type_of_options)&&(e.date_process=new Date().toISOString().substr(0,10))},remapMemberID:function(n,e){e.member_id=[],n.forEach(s=>{e.member_id.push(s.value)})},previewOfReport:function(n,e){this.$http("coperative/api/report-preview",{method:"GET",params:{type:n.value,date_start:e.date_start,date_end:e.date_end,year:e.year,member_id:e.member_id,month:e.month,date_process:e.date_process}}).then(s=>{this.render=s}).catch(()=>{})}}},P=L("div",{class:"overline mt-6"}," page orientation ",-1),$=["innerHTML"];function N(n,e,s,r,f,d){const w=U("v-date-input"),C=U("page-blank");return u(),p(C,{"page-name":"coperative-report","page-key":"report",title:"Laporan","page-path":"/coperative/api/report","show-sidenav":""},{info:a(({combos:{members:V,types:R},record:l,theme:y,store:h})=>[t(c,null,{default:a(()=>[t(v,{dense:""},{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(b,{modelValue:l.selected,"onUpdate:modelValue":[o=>l.selected=o,o=>d.onReportTypeChange(o,l,h)],items:R,label:"Pilih Jenis","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(F,null,{default:a(()=>[M(t(A,{flat:"",tile:""},{default:a(()=>[t(B,null,{default:a(()=>[_("PILIHAN")]),_:1}),t(c,null,{default:a(()=>[t(v,{dense:""},{default:a(()=>[["deposit","deposit_detail","loan_payment","loan_mutation_date"].includes(n.type_of_options)?(u(),p(i,{key:0,cols:"12"},{default:a(()=>[t(w,{"prepend-icon":"","prepend-inner-icon":"$calendar",modelValue:l.date_start,"onUpdate:modelValue":o=>l.date_start=o,label:"Tanggal Awal"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["deposit","deposit_detail","loan_payment","loan_mutation_date"].includes(n.type_of_options)?(u(),p(i,{key:1,cols:"12"},{default:a(()=>[t(w,{"prepend-icon":"","prepend-inner-icon":"$calendar",modelValue:l.date_end,"onUpdate:modelValue":o=>l.date_end=o,label:"Tanggal Akhir"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["deposit_pokok","deposit_wajib","deposit_tabungan"].includes(n.type_of_options)?(u(),p(i,{key:2,cols:"12"},{default:a(()=>[t(k,{modelValue:l.year,"onUpdate:modelValue":o=>l.year=o,type:"number",label:"Tahun","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["loan_mutation_month"].includes(n.type_of_options)?(u(),p(i,{key:3,cols:"6"},{default:a(()=>[t(E,{items:[{title:"Januari",value:1},{title:"Februari",value:2},{title:"Maret",value:3},{title:"April",value:4},{title:"Mei",value:5},{title:"Juni",value:6},{title:"Juli",value:7},{title:"Agustus",value:8},{title:"September",value:9},{title:"Oktober",value:10},{title:"November",value:11},{title:"Desember",value:12}],label:"Bulan",type:"number",modelValue:l.month,"onUpdate:modelValue":o=>l.month=o,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["loan_mutation_month"].includes(n.type_of_options)?(u(),p(i,{key:4,cols:"6"},{default:a(()=>[t(k,{label:"Tahun",type:"number",modelValue:l.year,"onUpdate:modelValue":o=>l.year=o,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["loan_age"].includes(n.type_of_options)?(u(),p(i,{key:5,cols:"12"},{default:a(()=>[t(k,{type:"date",modelValue:l.date_process,"onUpdate:modelValue":o=>l.date_process=o,label:"Select a date"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0),["deposit","deposit_detail","deposit_pokok","deposit_wajib","deposit_tabungan","loan_payment"].includes(n.type_of_options)?(u(),p(i,{key:6,cols:"12"},{default:a(()=>[t(b,{modelValue:l.member,"onUpdate:modelValue":[o=>l.member=o,o=>d.remapMemberID(o,l)],items:V,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):m("",!0),["loan_mutation_date"].includes(n.type_of_options)?(u(),p(i,{key:7,cols:"12"},{default:a(()=>[t(b,{modelValue:l.member,"onUpdate:modelValue":[o=>l.member=o,o=>d.remapMemberID(o,l)],items:V,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):m("",!0),["loan_mutation_month","loan_age"].includes(n.type_of_options)?(u(),p(i,{key:8,cols:"12"},{default:a(()=>[t(b,{modelValue:l.member,"onUpdate:modelValue":[o=>l.member=o,o=>d.remapMemberID(o,l)],items:V,label:"Anggota","hide-details":"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):m("",!0),t(i,{cols:"12"},{default:a(()=>[P]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(O,{modelValue:l.orientation,"onUpdate:modelValue":o=>l.orientation=o,"hide-details":"",row:""},{default:a(()=>[t(D,{label:"Landscape",value:"landscape"}),t(D,{label:"Portrait",value:"portrait"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1536),[[x,n.expand]])]),_:2},1024),t(I),t(c,null,{default:a(()=>[t(v,{dense:""},{default:a(()=>[t(i,{cols:"6"},{default:a(()=>[t(g,{color:y,block:"",dark:"",depressed:"",onClick:o=>d.downloadXLS(l.selected,l,h)},{default:a(()=>[t(T,{class:"mr-2"},{default:a(()=>[_("downloading")]),_:1}),_(" XLS")]),_:2},1032,["color","onClick"])]),_:2},1024),t(i,{cols:"6"},{default:a(()=>[t(g,{color:y,block:"",dark:"",depressed:"",onClick:o=>d.downloadPDF(l.selected,l,h)},{default:a(()=>[t(T,{class:"mr-2"},{default:a(()=>[_("downloading")]),_:1}),_(" PDF")]),_:2},1032,["color","onClick"])]),_:2},1024),t(i,{cols:"12"},{default:a(()=>[t(g,{color:y,block:"",dark:"",depressed:"",onClick:o=>d.previewOfReport(l.selected,l,h)},{default:a(()=>[_("preview")]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:a(()=>[t(c,null,{default:a(()=>[L("div",{flat:"",tile:"",innerHTML:n.render},null,8,$)]),_:1})]),_:1})}const X=S(j,[["render",N]]);export{X as default};
