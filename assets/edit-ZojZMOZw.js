import{_ as A,o as m,D as v,s as t,y as n,J as o,S as V,H as _,F as N,c as p,r as B,K as k,W as U,bt as D,B as c,L as F,z as b,A as h,N as L}from"./app-D4-JbIhK.js";import{V as r}from"./VCombobox-r3z0ASKw.js";const P={name:"infrastructure-document-edit-land-certificate",props:["record"]};function w(a,e,l,i,d,f){return m(),v(N,null,[t(_,{dense:""},{default:n(()=>[t(o,{cols:"12"},{default:n(()=>[t(V,{label:"Nik",modelValue:l.record.nik,"onUpdate:modelValue":e[0]||(e[0]=y=>l.record.nik=y)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{dense:""},{default:n(()=>[t(o,{cols:"12"},{default:n(()=>[t(V,{label:"Nip",modelValue:l.record.nip,"onUpdate:modelValue":e[1]||(e[1]=y=>l.record.nip=y)},null,8,["modelValue"])]),_:1})]),_:1})],64)}const S=A(P,[["render",w]]),$={name:"infrastructure-document-edit",components:{LandCertificate:S},data(){return{currentFormType:"",formType:["LandCertificate"],unit:{},asset:{},assets:void 0,assets_slugs:void 0,assets_slugs_combos:void 0,assets_types:void 0}},methods:{clearAssetOption:function(a,e){e.asset={},a.asset={}},initAssetTypes:function(a,e){e.assets_types||this.$http("infrastructure/api/ref-asset/type").then(l=>{e.assets_types=l})},checkRoute:function(a=""){let e=this.$router.currentRoute._value.name,l=["show","delete","update","edit","create"];for(let i of l)e=e.replaceAll("-"+i,"");return e==a},getAssetType:function(a,e,l){if(a.unit=e[a.unit.slug],a.asset={},l.asset={},l.assets_types&&a.asset.asset_type_key)return l.getAssetList(a,e,l);l.asset_list=void 0,l.assets_slugs=void 0,l.assets_slugs_combos=void 0,this.$http("infrastructure/api/ref-asset/type").then(i=>{l.assets_types=i})},getAssetList:function(a,e,l){a.asset={asset_type_key:a.asset.asset_type_key,slug_unit:a.asset.slug_unit},l.assets=void 0,l.assets_slugs=void 0,l.assets_slugs_combos=void 0,this.$http(`infrastructure/api/ref-asset/${e[a.unit.slug].id}/${a.asset.asset_type_key}/asset`).then(i=>{l.assets_slugs_combos=i.assets_slugs_combos,l.assets_slugs=i.assets_slugs,l.assets=i.assets})},getAsset:function(a,e){a.asset={...a.asset,...e.assets_slugs[a.asset.slug]}},selectType:function(a,e){e.currentFormType=a.documentable_type_key}}},K={key:2};function O(a,e,l,i,d,f){const y=B("form-edit");return m(),p(y,{"with-helpdesk":""},{default:n(({combos:{type_key:T,units:g,units_slug:C,type_status_map:R,status:x},record:s})=>[t(L,null,{default:n(()=>[t(_,{dense:""},{default:n(()=>[t(o,{cols:"12"},{default:n(()=>[t(V,{label:"Name",modelValue:s.name,"onUpdate:modelValue":u=>s.name=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(o,{cols:"12"},{default:n(()=>[t(V,{label:"Description",modelValue:s.description,"onUpdate:modelValue":u=>s.description=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(o,{cols:"12"},{default:n(()=>[t(r,{items:x,label:"Status",modelValue:s.status,"onUpdate:modelValue":u=>s.status=u,"return-object":!1},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e[3]||(e[3]=k("div",{class:"text-overline mt-6"},"Form Document",-1)),t(U,{thickness:3,class:"mt-3 mb-10"}),t(_,{dense:""},{default:n(()=>[t(o,{cols:"12"},{default:n(()=>[t(r,{items:T,label:"Tipe Document",modelValue:s.documentable_type_key,"onUpdate:modelValue":u=>s.documentable_type_key=u,"return-object":!1,readonly:!0},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),(m(),p(D(s.documentable_type_key),{record:s},null,8,["record"])),e[4]||(e[4]=k("div",{class:"text-overline mt-6"},"Terhubung Ke Unit",-1)),t(U,{thickness:3,class:"mt-3 mb-10"}),s.unit!=null?(m(),p(_,{key:0,dense:""},{default:n(()=>[t(o,{cols:"6"},{default:n(()=>[t(V,{label:"Nama Unit",modelValue:g[s.unit.slug].name,"onUpdate:modelValue":u=>g[s.unit.slug].name=u,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(o,{cols:"6"},{default:n(()=>[t(r,{items:C,label:"Pilih Unit",modelValue:s.unit.slug,"onUpdate:modelValue":[u=>s.unit.slug=u,u=>f.getAssetType(s,g,this)]},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):c("",!0),e[5]||(e[5]=k("div",{class:"text-overline mt-6"},"Terhubung Ke Asset (optional)",-1)),s.asset!=null&&s.unit.slug!=null?(m(),p(_,{key:1,dense:""},{default:n(()=>[t(o,{cols:"12"},{default:n(()=>[t(r,{items:d.assets_types,label:"Pilih Tipe Asset",modelValue:s.asset.asset_type_key,"onUpdate:modelValue":[u=>s.asset.asset_type_key=u,u=>f.getAssetList(s,g,this)]},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):c("",!0),d.assets_types==null?(m(),v("div",K,F(f.initAssetTypes(s,this)),1)):c("",!0),s.asset!=null&&s.asset.asset_type_key!=null&&d.assets_slugs_combos!=null&&d.assets_slugs_combos.length>0?(m(),p(_,{key:3,dense:""},{default:n(()=>[t(o,{cols:"6"},{default:n(()=>[t(V,{label:"Nama Asset",modelValue:s.asset.name,"onUpdate:modelValue":u=>s.asset.name=u,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(o,{cols:"6"},{default:n(()=>[t(r,{items:d.assets_slugs_combos,label:"Pilih Asset Slug",modelValue:s.asset.slug,"onUpdate:modelValue":[u=>s.asset.slug=u,u=>f.getAsset(s,this)]},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",onClick:u=>f.clearAssetOption(s,this)},{default:n(()=>e[0]||(e[0]=[h("Bersihkan Pilihan Asset")])),_:2},1032,["color","onClick"])]),_:2},1024)):c("",!0),s.asset!=null&&s.asset.asset_type_key!=null&&d.assets_slugs_combos!=null&&d.assets_slugs_combos.length<=0?(m(),p(_,{key:4,dense:""},{default:n(()=>[t(b,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",disabled:!0},{default:n(()=>e[1]||(e[1]=[h("Tidak Ditemukan")])),_:1}),t(b,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",onClick:u=>f.clearAssetOption(s,this)},{default:n(()=>e[2]||(e[2]=[h("Bersihkan Pilihan Asset")])),_:2},1032,["color","onClick"])]),_:2},1024)):c("",!0)]),_:2},1024)]),_:1})}const E=A($,[["render",O]]);export{E as default};
