import{_ as w,r as D,o as i,c as p,y as t,z as f,B as h,s as l,A as m,V as x,K as e,P as d,a4 as U,D as k,bt as E,L as c,W as I,H as V,J as u,a8 as B,F as T,E as L,T as O,S as C,Q as R,X as P}from"./app-CgYTy_-w.js";import{V as S}from"./VTable-BHsTyXbe.js";import{V as F,a as $}from"./VRadioGroup-C5pjvyuA.js";const G={name:"mycoperative-loan-show",data:()=>({formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{publishThisLoan(n,s){s.$http(`mycoperative/api/loan/${n.id}/publish`,{method:"POST",params:n}).then(b=>{let y=s.records.findIndex(_=>_.id===n.id);s.records[y].status=b.status,s.snackbar.color="green",s.snackbar.text="Berhasil",s.snackbar.state=!0,this.$router.push({name:"mycoperative-loan"})})},closeThisLoan(n,s){s.$http(`mycoperative/api/loan/${n.id}/close-by-cash`,{method:"POST",params:n,contentType:"multipart/form-data"}).then(()=>{s.snackbar.color="green",s.snackbar.text="Berhasil",s.snackbar.state=!0,this.$router.push({name:"mycoperative-loan"})}).catch(b=>{console.error("Error:",b.message)})},downloadReceiptOfTransaction(n,s){s.$http(`mycoperative/api/receipt/${n.slug}`,{method:"GET",responseType:"blob"}).then(b=>{const y=new Blob([b],{type:"application/pdf"}),_=document.createElement("a");_.href=URL.createObjectURL(y),_.download=n.slug+".pdf",_.click(),URL.revokeObjectURL(_.href),s.loader.state=!1}).catch(()=>{})}}},j=e("div",{class:"text-caption bg-white rounded-pill px-2"},"STS",-1),H={class:"text-caption pr-1 pl-2"},J={key:0,class:"text-end ma-2"},M=e("div",null,[e("small",null,"Nominal Pinjaman:")],-1),z={class:"text-h5"},K={class:"text-h5"},Q=e("small",null,"Tenor:",-1),W=e("small",null,"Status:",-1),X=e("small",null,"Jatuh Tempo",-1),Y=e("small",null,"Pokok",-1),q=e("small",null,"Bunga",-1),Z=e("small",null,"Total",-1),ll=e("td",null,"Total Pokok Pinjaman",-1),el=e("td",null,":",-1),tl=e("td",null,"Total Bunga [%]",-1),al=e("td",null,":",-1),ol=e("td",null,"Total Bunga [Rp]",-1),nl=e("td",null,":",-1),sl=e("td",null,"Admin Fee",-1),dl=e("td",null,":",-1),ul=e("td",null,"Grand Total",-1),il=e("td",null,":",-1),rl={class:"d-flex align-center"},cl={class:"px-4 py-2 flex-grow-1"},ml=e("small",null,"Angsungran / Bulan",-1),_l={class:"text-h5"},pl={class:"px-4 py-2"};function fl(n,s,b,y,_,g){const A=D("form-show");return i(),p(A,{"with-helpdesk":"",ref:"form","hide-delete":"","hide-edit":""},{toolbar:t(({record:a,store:v})=>[a.status==="DRAFT"?(i(),p(f,{key:0,icon:"edit",onClick:s[0]||(s[0]=r=>n.$refs.form.openFormEdit())})):h("",!0),a.status==="DRAFT"?(i(),p(f,{key:1,icon:"delete",onClick:s[1]||(s[1]=r=>n.$refs.form.postFormDelete())})):h("",!0),a.status==="ONGOING"?(i(),p(f,{key:2,icon:"",tooltip:"Cetak Tanda Terima",onClick:r=>g.downloadReceiptOfTransaction(a,v)},{default:t(()=>[l(x,null,{default:t(()=>[m("print")]),_:1})]),_:2},1032,["onClick"])):h("",!0)]),default:t(({record:a,store:v,theme:r})=>[l(U,{color:r,class:"position-absolute d-flex pa-1",rounded:"pill",style:{top:"8px",right:"8px"}},{default:t(()=>[j,e("div",H,d(a.status),1)]),_:2},1032,["color"]),a.status==="REJECTED"?(i(),k("div",J,[e("small",null,"!"+d(a.rejected_message),1)])):h("",!0),l(c,null,{default:t(()=>[l(E,{modelValue:a.type,"onUpdate:modelValue":o=>a.type=o,divided:"",color:`${r}-darken-1`},{default:t(()=>[l(f,{icon:"person",value:"personal",disabled:""}),l(f,{icon:"apartment",value:"unit",disabled:""})]),_:2},1032,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),l(I),l(c,null,{default:t(()=>[l(V,{dense:""},{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[M,e("div",z,d(n.formatter.format(a.total_principal)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(c,{class:"pt-0"},{default:t(()=>[l(V,{dense:""},{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[m("Tenor "),e("div",K,d(a.tenor)+"x",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),["ONGOING","COMPLETED"].includes(a.status)?(i(),k(T,{key:1},[l(c,null,{default:t(()=>[l(B,{class:"overline"},{default:t(()=>[m("Detail Pinjaman")]),_:1})]),_:1}),(i(!0),k(T,null,L(a.details,(o,N)=>(i(),p(R,{rounded:"lg",class:"mb-4 mx-2",key:N,flat:"",border:""},{default:t(()=>[l(c,{class:"d-flex pb-0"},{default:t(()=>[l(u,{cols:"6"},{default:t(()=>[m(d(o.slug),1)]),_:2},1024),l(u,null,{default:t(()=>[Q,e("small",null,d(o.tenor)+"/"+d(o.tenor_total),1)]),_:2},1024),l(u,null,{default:t(()=>[W,l(x,{color:o.paid?"green":"grey"},{default:t(()=>[m(d(o.paid?"check_circle":"radio_button_unchecked"),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),l(c,{class:P(`bg-${r}-lighten-5`)},{default:t(()=>[l(V,{class:"d-flex"},{default:t(()=>[l(u,null,{default:t(()=>[X,e("div",null,[e("small",null,d(o.duedate),1)])]),_:2},1024),l(u,null,{default:t(()=>[Y,e("div",null,d(n.formatter.format(o.principal)),1)]),_:2},1024),l(u,null,{default:t(()=>[q,e("div",null,d(n.formatter.format(o.interest)),1)]),_:2},1024),l(u,null,{default:t(()=>[Z,e("div",null,[e("small",null,d(n.formatter.format(o.grandtotal)),1)])]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))],64)):(i(),k(T,{key:2},[l(c,{class:"pt-0"},{default:t(()=>[l(V,{dense:""},{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(S,null,{default:t(()=>[e("tbody",null,[e("tr",null,[ll,el,e("td",null,d(n.formatter.format(a.total_principal)),1)]),e("tr",null,[tl,al,e("td",null,d(a.percent_interest)+"% ",1)]),e("tr",null,[ol,nl,e("td",null,d(n.formatter.format(a.total_interest)),1)]),e("tr",null,[sl,dl,e("td",null,d(n.formatter.format(a.admfee)),1)]),e("tr",null,[ul,il,e("td",null,d(a.grandtotal),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(c,null,{default:t(()=>[l(B,{class:"overline"},{default:t(()=>[m("metode pembayaran")]),_:1})]),_:1}),l(c,{class:"pt-0"},{default:t(()=>[l(V,{dense:""},{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(F,{modelValue:a.transfermode,"onUpdate:modelValue":o=>a.transfermode=o,disabled:"","hide-details":"",row:""},{default:t(()=>[l($,{label:"CASH",value:1}),l($,{label:"BANK",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.transfermode==1&&a.status==="APPROVED"?(i(),p(f,{key:0,disabled:!a.paydate>0,class:"mt-6",color:"green",block:"",dark:"",depressed:"",onClick:o=>g.closeThisLoan(a,v)},{default:t(()=>[m("UANG TELAH SAYA TERIMA")]),_:2},1032,["disabled","onClick"])):h("",!0),a.transfermode===2?(i(),k(T,{key:1},[l(u,{cols:"4"},{default:t(()=>[l(O,{color:r,items:["BRI","BCA","BNI","BTPN","MANDIRI"],label:"Bank",modelValue:a.bank_type,"onUpdate:modelValue":o=>a.bank_type=o,readonly:"",variant:"outlined","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{cols:"8"},{default:t(()=>[l(C,{color:r,label:"Atas Nama",modelValue:a.bank_account_name,"onUpdate:modelValue":o=>a.bank_account_name=o,variant:"outlined",readonly:"","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024),l(u,{cols:"12"},{default:t(()=>[l(C,{color:r,label:"Nomor Rekening",modelValue:a.bank_account_number,"onUpdate:modelValue":o=>a.bank_account_number=o,variant:"outlined",readonly:"","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):h("",!0)]),_:2},1024)]),_:2},1024),l(R,{class:"position-sticky bottom-0 mx-4",flat:"",color:`${r}-lighten-5`},{default:t(()=>[e("div",rl,[e("div",cl,[ml,e("div",_l,d(n.formatter.format(a.monthly_interest)),1)]),e("div",pl,[a.status==="DRAFT"?(i(),p(f,{key:0,variant:"flat",color:r,class:"mt-2",onClick:o=>g.publishThisLoan(a,v)},{default:t(()=>[m("Ajukan")]),_:2},1032,["color","onClick"])):h("",!0)])])]),_:2},1032,["color"]),l(c)],64))]),_:1},512)}const Vl=w(G,[["render",fl]]);export{Vl as default};
