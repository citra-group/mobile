import{_ as M,r as b,o as s,c as d,y as t,z as c,B as r,s as a,K as _,P as g,a4 as U,L as v,H as w,J as u,S as $,W as S,a0 as I,V as R,A as p,a1 as B,$ as E,a6 as F,Q as x,R as N,a7 as A,a2 as O}from"./app-CgYTy_-w.js";import{V as D}from"./VTextarea-B9DRB_jG.js";import{V as L}from"./VBanner-BiUcORGF.js";const H={name:"coperative-withdrawal-show",computed:{lastAvailableDate(){var l=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate()+1);return l.toISOString().slice(0,10)}},data:()=>({model:!1,currentDate:new Date,dialogMessage:!1,dialogMode:null,transferDate:!1,formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{dateFormated(l){if(!l)return null;const[o,y,C]=l.split("-");return`${C}-${y}-${o}`},openDialogMessage(l){this.dialogMessage=!0,this.dialogMode=l},approvedCurrentSubmission(l,o){o.$http(`coperative/api/withdrawal/${l.id}/approved`,{method:"PUT",params:l}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},completedCurrentSubmission(l,o){if(!l.transferdate){this.$refs.form.showErrorMessage("tanggal transfer di perlukan!");return}if(!l.transfer_path&&!l.image_path){this.$refs.form.showErrorMessage("bukti transfer di perlukan!");return}o.$http(`coperative/api/withdrawal/${l.id}/completed`,{method:"POST",params:l,contentType:"multipart/form-data"}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},deniedCurrentSubmission(l,o){o.$http(`coperative/api/withdrawal/${l.id}/denied`,{method:"PUT",params:l}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},printedCurrentSubmission(l,o){o.$http(`coperative/api/withdrawal/${l.id}/printed`,{method:"PUT",params:l}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},repairedCurrentSubmission(l,o){o.$http(`coperative/api/withdrawal/${l.id}/repaired`,{method:"PUT",params:l}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})},verifiedCurrentSubmission(l,o){o.$http(`coperative/api/withdrawal/${l.id}/verified`,{method:"PUT",params:l}).then(()=>{this.$router.push({name:"coperative-withdrawal"})})}}},K=_("div",{class:"text-caption bg-white rounded-pill px-2"},"STS",-1),j={class:"text-caption pr-1 pl-2"},z={class:"d-flex justify-center"},J={class:"flex-grow-3"},Q={class:"mr-2 ml-2"},W={class:"text-right flex-grow-1"},Y={class:"text-right flex-grow-3"};function q(l,o,y,C,G,m){const V=b("v-currency-field"),P=b("v-date-input"),T=b("form-show");return s(),d(T,{"with-helpdesk":"","hide-edit":"","hide-delete":""},{toolbar:t(({record:f,store:k})=>[f.status==="COMPLETED"&&f.transfermode===1?(s(),d(c,{key:0,icon:"print",tooltip:"Cetak Tanda Terima",onClick:e=>m.printedCurrentSubmission(f,k)},null,8,["onClick"])):r("",!0)]),default:t(({statuses:{isVerificator:f,isApproval:k},record:e,store:h,theme:i})=>[a(U,{color:i,class:"position-absolute d-flex pa-1",rounded:"pill",style:{top:"8px",right:"8px"}},{default:t(()=>[K,_("div",j,g(e.status),1)]),_:2},1032,["color"]),a(U,{class:"transparent"},{default:t(()=>[a(v,null,{default:t(()=>[a(w,{dense:""},{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a($,{label:"Nomor",modelValue:e.slug,"onUpdate:modelValue":n=>e.slug=n,"hide-details":"",variant:"outlined",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a($,{label:"Nama",modelValue:e.name,"onUpdate:modelValue":n=>e.name=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(S),a(v,null,{default:t(()=>[a(w,{dense:""},{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(V,{label:"Tabungan",prefix:"Rp",modelValue:e.amount_of_saving,"onUpdate:modelValue":n=>e.amount_of_saving=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a(V,{label:"Penarikan",prefix:"Rp",modelValue:e.amount_of_withdrawal,"onUpdate:modelValue":n=>e.amount_of_withdrawal=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a(V,{label:"Total",prefix:"Rp",modelValue:e.amount_of_deposit,"onUpdate:modelValue":n=>e.amount_of_deposit=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a(V,{prefix:"Rp",label:"Nominal Penarikan",modelValue:e.total,"onUpdate:modelValue":n=>e.total=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),a(u,{cols:"12"},{default:t(()=>[a(D,{label:"Keterangan",rows:"3",modelValue:e.description,"onUpdate:modelValue":n=>e.description=n,variant:"outlined",color:i,"hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e.status==="APPROVED"?(s(),d(u,{key:0,cols:"12"},{default:t(()=>[a(L,{lines:"tow",stacked:!1},{default:t(()=>[a(I,{class:"mr-2",line:"three",color:"deep-purple accent-4",size:"40"},{default:t(()=>[a(R,{color:"white"},{default:t(()=>[p("privacy_tip")]),_:1})]),_:1}),p(" Pembayaran dapat dilakukan dengan cara transfer ke. Bank "+g(e.bank_name)+" atas nama: "+g(e.bank_account_name)+" dengan nomor rekening "+g(e.bank_account_number)+" Setelah transfer dilakukan, silahkan unggah bukti bayar dibawah ini. ",1)]),_:2},1024)]),_:2},1024)):r("",!0)]),_:2},1024),e.status==="APPROVED"?(s(),d(w,{key:0},{default:t(()=>[e.transfer_path?(s(),d(u,{key:0,cols:"12"},{default:t(()=>[a(B,{src:e.transfer_path},null,8,["src"])]),_:2},1024)):r("",!0),e.transfer_path?r("",!0):(s(),d(u,{key:1,cols:"12"},{default:t(()=>[_("div",z,[a(P,{modelValue:e.transferdate,"onUpdate:modelValue":n=>e.transferdate=n,label:"Tanggal Transfer","prepend-icon":"","prepend-inner-icon":"$calendar"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)),e.transfer_path?r("",!0):(s(),d(u,{key:2,cols:"12"},{default:t(()=>[a(E,{accept:"image/*",label:"File input","prepend-icon":"","prepend-inner-icon":"attach_file",modelValue:e.image_path,"onUpdate:modelValue":n=>e.image_path=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024)):r("",!0)]),_:2},1024),a(v,{class:"d-flex mb-4 justify-center"},{default:t(()=>[_("div",J,[f&&["PUBLISH","VERIFIED"].includes(e.status)?(s(),d(c,{key:0,variant:"tonal",color:i,onClick:o[0]||(o[0]=n=>m.openDialogMessage("denied"))},{default:t(()=>[p("Tolak")]),_:2},1032,["color"])):r("",!0)]),_("div",Q,[f&&e.status==="PUBLISH"?(s(),d(c,{key:0,variant:"tonal",color:i,onClick:o[1]||(o[1]=n=>m.openDialogMessage("repaired"))},{default:t(()=>[p("Perbaiki")]),_:2},1032,["color"])):r("",!0)]),_("div",null,[f&&e.status==="PUBLISH"?(s(),d(c,{key:0,variant:"tonal",color:i,onClick:n=>m.verifiedCurrentSubmission(e,h)},{default:t(()=>[p("Verifikasi")]),_:2},1032,["color","onClick"])):r("",!0)]),_("div",W,[k&&e.status==="VERIFIED"?(s(),d(c,{key:0,variant:"tonal",color:i,onClick:n=>m.approvedCurrentSubmission(e,h)},{default:t(()=>[p("Setujui")]),_:2},1032,["color","onClick"])):r("",!0)]),_("div",Y,[f&&e.status==="APPROVED"?(s(),d(c,{key:0,variant:"tonal",color:i,onClick:n=>m.completedCurrentSubmission(e,h)},{default:t(()=>[p("Selesai")]),_:2},1032,["color","onClick"])):r("",!0)])]),_:2},1024),a(F,{modelValue:l.dialogMessage,"onUpdate:modelValue":o[3]||(o[3]=n=>l.dialogMessage=n),width:"500"},{default:t(()=>[a(x,null,{default:t(()=>[a(N,{class:"text-h5 grey lighten-2"},{default:t(()=>[p("Keterangan")]),_:1}),a(v,null,{default:t(()=>[a(w,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(D,{modelValue:e.message,"onUpdate:modelValue":n=>e.message=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(S),a(A,null,{default:t(()=>[a(O),a(c,{color:"grey",text:"",onClick:o[2]||(o[2]=n=>l.dialogMessage=!1)},{default:t(()=>[p(" Batal ")]),_:1}),a(c,{color:"primary",text:"",onClick:n=>l.dialogMode==="denied"?m.deniedCurrentSubmission(e,h):m.repairedCurrentSubmission(e,h)},{default:t(()=>[p("Kirim")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024),a(x,{class:"position-fixed bottom-0"})]),_:1})}const ae=M(H,[["render",q]]);export{ae as default};
