import{_ as D,c as b,y as e,r as E,o as i,z as k,B as V,s as t,A as p,V as B,K as a,L as u,a5 as I,D as v,bH as L,N as m,X as O,H as T,J as d,a9 as C,F as R,E as F,U as P,T as $,R as A,Y as S}from"./app-B4E9xsRO.js";import{V as c}from"./VTable-IwD3Nzib.js";import{V as G,a as N}from"./VRadioGroup-BW1bsmCx.js";const j={name:"mycoperative-loan-show",data:()=>({formatter:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})}),methods:{publishThisLoan(s,l){l.$http(`mycoperative/api/loan/${s.id}/publish`,{method:"POST",params:s}).then(y=>{let g=l.records.findIndex(f=>f.id===s.id);l.records[g].status=y.status,l.snackbar.color="green",l.snackbar.text="Berhasil",l.snackbar.state=!0,this.$router.push({name:"mycoperative-loan"})})},closeThisLoan(s,l){l.$http(`mycoperative/api/loan/${s.id}/close-by-cash`,{method:"POST",params:s,contentType:"multipart/form-data"}).then(()=>{l.snackbar.color="green",l.snackbar.text="Berhasil",l.snackbar.state=!0,this.$router.push({name:"mycoperative-loan"})}).catch(y=>{console.error("Error:",y.message)})},downloadReceiptOfTransaction(s,l){l.$http(`mycoperative/api/receipt/${s.slug}`,{method:"GET",responseType:"blob"}).then(y=>{const g=new Blob([y],{type:"application/pdf"}),f=document.createElement("a");f.href=URL.createObjectURL(g),f.download=s.slug+".pdf",f.click(),URL.revokeObjectURL(f.href),l.loader.state=!1}).catch(()=>{})}}},H={class:"text-caption pr-1 pl-2"},J={key:0,class:"text-end ma-2"},M={class:"text-h5"},h={class:"text-h5"},z={class:"d-flex align-center"},K={class:"px-4 py-2 flex-grow-1"},Y={class:"text-h5"},X={class:"px-4 py-2"};function q(s,l,y,g,f,x){const U=E("form-show");return i(),b(U,{"with-helpdesk":"",ref:"form","hide-delete":"","hide-edit":""},{toolbar:e(({record:n,store:_})=>[n.status==="DRAFT"?(i(),b(k,{key:0,icon:"edit",onClick:l[0]||(l[0]=r=>s.$refs.form.openFormEdit())})):V("",!0),n.status==="DRAFT"?(i(),b(k,{key:1,icon:"delete",onClick:l[1]||(l[1]=r=>s.$refs.form.postFormDelete())})):V("",!0),n.status==="ONGOING"?(i(),b(k,{key:2,icon:"",tooltip:"Cetak Tanda Terima",onClick:r=>x.downloadReceiptOfTransaction(n,_)},{default:e(()=>[t(B,null,{default:e(()=>l[2]||(l[2]=[p("print")])),_:1})]),_:2},1032,["onClick"])):V("",!0)]),default:e(({record:n,store:_,theme:r})=>[t(I,{color:r,class:"position-absolute d-flex pa-1",rounded:"pill",style:{top:"8px",right:"8px"}},{default:e(()=>[l[3]||(l[3]=a("div",{class:"text-caption bg-white rounded-pill px-2"},"STS",-1)),a("div",H,u(n.status),1)]),_:2},1032,["color"]),n.status==="REJECTED"?(i(),v("div",J,[a("small",null,"!"+u(n.rejected_message),1)])):V("",!0),t(m,null,{default:e(()=>[t(L,{modelValue:n.type,"onUpdate:modelValue":o=>n.type=o,divided:"",color:`${r}-darken-1`},{default:e(()=>[t(k,{icon:"person",value:"personal",disabled:""}),t(k,{icon:"apartment",value:"unit",disabled:""})]),_:2},1032,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),t(O),t(m,null,{default:e(()=>[t(T,{dense:""},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[l[4]||(l[4]=a("div",null,[a("small",null,"Nominal Pinjaman:")],-1)),a("div",M,u(s.formatter.format(n.total_principal)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(m,{class:"pt-0"},{default:e(()=>[t(T,{dense:""},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[l[5]||(l[5]=p("Tenor ")),a("div",h,u(n.tenor)+"x",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),["ONGOING","COMPLETED"].includes(n.status)?(i(),v(R,{key:1},[t(m,null,{default:e(()=>[t(C,{class:"overline"},{default:e(()=>l[6]||(l[6]=[p("Detail Pinjaman ")])),_:1})]),_:1}),(i(!0),v(R,null,F(n.details,(o,w)=>(i(),b(A,{rounded:"lg",class:"mb-4 mx-2",key:w,flat:"",border:""},{default:e(()=>[t(m,{class:"d-flex pb-0"},{default:e(()=>[t(d,{cols:"6"},{default:e(()=>[p(u(o.slug),1)]),_:2},1024),t(d,null,{default:e(()=>[l[7]||(l[7]=a("small",null,"Tenor:",-1)),a("small",null,u(o.tenor)+"/"+u(o.tenor_total),1)]),_:2},1024),t(d,null,{default:e(()=>[l[8]||(l[8]=a("small",null,"Status:",-1)),t(B,{color:o.paid?"green":"grey"},{default:e(()=>[p(u(o.paid?"check_circle":"radio_button_unchecked"),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),t(m,{class:S(`bg-${r}-lighten-5`)},{default:e(()=>[t(T,{class:"d-flex"},{default:e(()=>[t(d,null,{default:e(()=>[l[9]||(l[9]=a("small",null,"Jatuh Tempo",-1)),a("div",null,[a("small",null,u(o.duedate),1)])]),_:2},1024),t(d,null,{default:e(()=>[l[10]||(l[10]=a("small",null,"Pokok",-1)),a("div",null,u(s.formatter.format(o.principal)),1)]),_:2},1024),t(d,null,{default:e(()=>[l[11]||(l[11]=a("small",null,"Bunga",-1)),a("div",null,u(s.formatter.format(o.interest)),1)]),_:2},1024),t(d,null,{default:e(()=>[l[12]||(l[12]=a("small",null,"Total",-1)),a("div",null,[a("small",null,u(s.formatter.format(o.grandtotal)),1)])]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))],64)):(i(),v(R,{key:2},[t(m,{class:"pt-0"},{default:e(()=>[t(T,{dense:""},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(c,null,{default:e(()=>[a("tbody",null,[a("tr",null,[l[13]||(l[13]=a("td",null,"Total Pokok Pinjaman",-1)),l[14]||(l[14]=a("td",null,":",-1)),a("td",null,u(s.formatter.format(n.total_principal)),1)]),a("tr",null,[l[15]||(l[15]=a("td",null,"Total Bunga [%]",-1)),l[16]||(l[16]=a("td",null,":",-1)),a("td",null,u(n.percent_interest)+"% ",1)]),a("tr",null,[l[17]||(l[17]=a("td",null,"Total Bunga [Rp]",-1)),l[18]||(l[18]=a("td",null,":",-1)),a("td",null,u(s.formatter.format(n.total_interest)),1)]),a("tr",null,[l[19]||(l[19]=a("td",null,"Admin Fee",-1)),l[20]||(l[20]=a("td",null,":",-1)),a("td",null,u(s.formatter.format(n.admfee)),1)]),a("tr",null,[l[21]||(l[21]=a("td",null,"Grand Total",-1)),l[22]||(l[22]=a("td",null,":",-1)),a("td",null,u(n.grandtotal),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(m,null,{default:e(()=>[t(C,{class:"overline"},{default:e(()=>l[23]||(l[23]=[p("metode pembayaran")])),_:1})]),_:1}),t(m,{class:"pt-0"},{default:e(()=>[t(T,{dense:""},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(G,{modelValue:n.transfermode,"onUpdate:modelValue":o=>n.transfermode=o,disabled:"","hide-details":"",row:""},{default:e(()=>[t(N,{label:"CASH",value:1}),t(N,{label:"BANK",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.transfermode==1&&n.status==="APPROVED"?(i(),b(k,{key:0,disabled:!n.paydate>0,class:"mt-6",color:"green",block:"",dark:"",depressed:"",onClick:o=>x.closeThisLoan(n,_)},{default:e(()=>l[24]||(l[24]=[p("UANG TELAH SAYA TERIMA")])),_:2},1032,["disabled","onClick"])):V("",!0),n.transfermode===2?(i(),v(R,{key:1},[t(d,{cols:"4"},{default:e(()=>[t(P,{color:r,items:["BRI","BCA","BNI","BTPN","MANDIRI"],label:"Bank",modelValue:n.bank_type,"onUpdate:modelValue":o=>n.bank_type=o,readonly:"",variant:"outlined","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024),t(d,{cols:"8"},{default:e(()=>[t($,{color:r,label:"Atas Nama",modelValue:n.bank_account_name,"onUpdate:modelValue":o=>n.bank_account_name=o,variant:"outlined",readonly:"","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024),t(d,{cols:"12"},{default:e(()=>[t($,{color:r,label:"Nomor Rekening",modelValue:n.bank_account_number,"onUpdate:modelValue":o=>n.bank_account_number=o,variant:"outlined",readonly:"","hide-details":""},null,8,["color","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):V("",!0)]),_:2},1024)]),_:2},1024),t(A,{class:"position-sticky bottom-0 mx-4",flat:"",color:`${r}-lighten-5`},{default:e(()=>[a("div",z,[a("div",K,[l[25]||(l[25]=a("small",null,"Angsungran / Bulan",-1)),a("div",Y,u(s.formatter.format(n.monthly_interest)),1)]),a("div",X,[n.status==="DRAFT"?(i(),b(k,{key:0,variant:"flat",color:r,class:"mt-2",onClick:o=>x.publishThisLoan(n,_)},{default:e(()=>l[26]||(l[26]=[p("Ajukan")])),_:2},1032,["color","onClick"])):V("",!0)])])]),_:2},1032,["color"]),t(m)],64))]),_:1},512)}const ll=D(j,[["render",q]]);export{ll as default};
