import{_ as x,c as r,y as l,r as _,o as i,s as a,V as R,A as $,z as B,D as C,L as I,B as f,H as d,J as m,S as V,K as b,W as h,$ as D,a1 as N,N as T}from"./mobile-Ca1R9rVu.js";import{V as S}from"./VTextarea-D2jSWitq.js";import{V as j}from"./VCombobox-BM4p7H6F.js";const w={name:"infrastructure-record-note-edit",data:()=>({init:!1}),methods:{changeImg:(n,t)=>{if(n.proof_img==""||n.proof_img==null)n.proof_img_path="";else{const u=URL.createObjectURL(n.proof_img);n.proof_img_path=u}},checkIsDraft:function(n,t){const u=this.$router.currentRoute._value;t.init=!0,console.log(u,this)},saveRecord:function(n,t){let u=this.$router.currentRoute._value.href;this.$router.currentRoute._value.name,u=u.replace("/edit","/update"),u=u.substring(1),u=u.replace("infrastructure/","infrastructure/api/"),console.log(n),this.$http(u,{method:"POST",params:n,contentType:"multipart/form-data"}).then(g=>{let c=t.records.findIndex(s=>s[t.key]===n[t.key]);c!==-1&&Object.keys(n).forEach(s=>{t.records[c][s]=n[s]}),t.openFormData(),t.snackbar.color="green",t.snackbar.text=`update data ${t.pageKey} berhasil`,t.snackbar.state=!0})}}},F={key:0};function L(n,t,u,g,c,s){const k=_("v-currency-field"),v=_("v-date-input"),y=_("form-edit");return i(),r(y,{"with-helpdesk":"","hide-update":""},{toolbar:l(({record:p,store:e})=>[a(B,{onClick:U=>s.saveRecord(p,e),icon:""},{default:l(()=>[a(R,null,{default:l(()=>t[0]||(t[0]=[$(" save ")])),_:1})]),_:2},1032,["onClick"])]),default:l(({combos:{statuses:p},record:e,store:U})=>[a(T,null,{default:l(()=>[e!=null&&!n.init?(i(),C("div",F,I(s.checkIsDraft(e,this)),1)):f("",!0),a(d,{dense:""},{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(V,{label:"Name",modelValue:e.name,"onUpdate:modelValue":o=>e.name=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(d,{dense:""},{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(S,{label:"Rincian",modelValue:e.description,"onUpdate:modelValue":o=>e.description=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(d,{dense:""},{default:l(()=>[p!=null?(i(),r(j,{key:0,items:p.store,"return-object":!1,label:"Status",modelValue:e.status,"onUpdate:modelValue":o=>e.status=o},null,8,["items","modelValue","onUpdate:modelValue"])):f("",!0)]),_:2},1024),a(d,{dense:""},{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(k,{label:"Harga Pembayaran",modelValue:e.payprice,"onUpdate:modelValue":o=>e.payprice=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(d,{dense:""},{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(v,{label:"Tanggal Pembayaran",modelValue:e.paydate,"onUpdate:modelValue":o=>e.paydate=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t[1]||(t[1]=b("div",{class:"text-overline mt-6"},"Bukti pembayaran :",-1)),a(h,{thickness:3,class:"mt-3 mb-6"}),a(d,{dense:""},{default:l(()=>[a(D,{label:"Gambar Bukti",modelValue:e.proof_img,"onUpdate:modelValue":[o=>e.proof_img=o,o=>s.changeImg(e,this)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(d,{dense:""},{default:l(()=>[e.proof_img_path!=null&&e.proof_img_path!=""?(i(),r(N,{key:0,src:e.proof_img_path,"aspect-ratio":"16/9",cover:""},null,8,["src"])):f("",!0)]),_:2},1024),t[2]||(t[2]=b("div",{class:"text-overline mt-6"},"Dibuat oleh :",-1)),a(h,{thickness:3,class:"mt-3 mb-6"}),e.user!=null?(i(),r(d,{key:1,dense:""},{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(V,{label:"Name",modelValue:e.user.name,"onUpdate:modelValue":o=>e.user.name=o,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):f("",!0)]),_:2},1024)]),_:1})}const H=x(w,[["render",L]]);export{H as default};
