import{_ as k,o as l,D as c,c as r,y as a,s,J as d,H as i,B as m,A as b,z as A,F as j,L as v,r as I,S as D,K as T,W as U,bt as R,N as B}from"./mobile-CHzIZaP5.js";import{V as o}from"./VCombobox-B7ZGHEnT.js";import{L as N,P as C}from"./type_periodic-wuRRNWeZ.js";const E={name:"infrastructure-tax-edit-asset",props:["record","data"],methods:{changeUnit:function(t,e){t.asset!=null&&t.asset.assetable_type_key!=null?t.asset={type:t.asset.assetable_type_key}:t.asset={},e.refAsset=void 0,e.refAssetType==null&&e.getRefAssetType(t,e),t.asset!=null&&t.asset.assetable_type_key!=null&&e.getRefAsset(t,e)},changeAssetType:function(t,e){e.getRefAsset(t,e)},changeAsset:function(t,e){t.asset={...t.asset,...e.refAsset.assets_slugs[t.asset.slug]}}}};function P(t,e,n,V,_,y){return l(),c(j,null,[n.data.refUnit!=null?(l(),r(i,{key:0,dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{"return-object":!0,items:n.data.refUnit.units,"item-title":"name",modelValue:n.record.unit,"onUpdate:modelValue":[e[0]||(e[0]=u=>n.record.unit=u),e[1]||(e[1]=u=>y.changeUnit(n.record,n.data))],label:"Untuk "+n.record.targetable_type_key+" Dari Unit"},null,8,["items","modelValue","label"])]),_:1})]),_:1})):m("",!0),n.data.refAssetType!=null?(l(),r(i,{key:1,dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{items:n.data.refAssetType,"item-title":"name","return-object":!1,modelValue:n.record.asset.assetable_type_key,"onUpdate:modelValue":[e[2]||(e[2]=u=>n.record.asset.assetable_type_key=u),e[3]||(e[3]=u=>y.changeAssetType(n.record,n.data))],label:"Pilih Jenis Asset"},null,8,["items","modelValue"])]),_:1})]),_:1})):m("",!0),n.data.refAsset!=null&&n.data.refAsset.assets!=null&&n.data.refAsset.assets.length>0?(l(),r(i,{key:2,dense:""},{default:a(()=>[s(d,{cols:"6"},{default:a(()=>[s(o,{items:n.data.refAsset.assets,"return-object":!1,readonly:!0,modelValue:n.record.asset.name,"onUpdate:modelValue":e[4]||(e[4]=u=>n.record.asset.name=u),label:"Nama Asset"},null,8,["items","modelValue"])]),_:1}),s(d,{cols:"6"},{default:a(()=>[s(o,{items:n.data.refAsset.assets_slugs_combos,"return-object":!1,modelValue:n.record.asset.slug,"onUpdate:modelValue":[e[5]||(e[5]=u=>n.record.asset.slug=u),e[6]||(e[6]=u=>y.changeAsset(n.record,n.data))],label:"Slug Asset"},null,8,["items","modelValue"])]),_:1})]),_:1})):m("",!0),n.data.refAsset!=null&&n.data.refAsset.assets!=null&&n.data.refAsset.assets.length==0?(l(),r(i,{key:3,dense:""},{default:a(()=>[s(A,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",disabled:!0},{default:a(()=>e[7]||(e[7]=[b("Tidak Ditemukan")])),_:1})]),_:1})):m("",!0)],64)}const S=k(E,[["render",P]]),w={name:"infrastructure-tax-create-document",data(){return{jenisHubungan:["Iya","Tidak"]}},props:["record","data"],methods:{changeUnit:function(t,e,n){t.asset!=null&&t.asset.assetable_type_key!=null?t.asset={type:t.asset.assetable_type_key}:t.asset={},e.refAsset=void 0,e.refDocument=void 0,e.refAssetType==null&&e.getRefAssetType(t,e),t.jenis=="Iya"&&t.asset!=null&&t.asset.assetable_type_key!=null&&e.getRefAsset(t,e),t.jenis=="Tidak"&&e.getRefDocument(t,e,t.jenis=="Iya")},changeDocumentType:function(t,e){e.refDocument=void 0,t.document={},t.asset==null&&(t.asset={}),t.jenis=="Tidak"?e.getRefDocument(t,e,t.jenis=="Iya"):t.jenis=="Iya"&&(e.refAssetType==null?e.getRefAssetType(t,e):e.getRefAsset(t,e))},changeAssetType:function(t,e){e.refDocument=void 0,e.getRefAsset(t,e)},changeAsset:function(t,e,n){t.asset={...t.asset,...e.refAsset.assets_slugs[t.asset.slug]},t.document={},e.getRefDocument(t,e,t.jenis=="Iya")},changeDocument:function(t,e){t.document=e.refDocument.documents_ids[t.document.id]}}},F={key:0},H={key:2};function J(t,e,n,V,_,y){return l(),c(j,null,[n.data.refUnit==null?(l(),c("div",F,v(n.data.getRefUnit(n.record,n.data)),1)):m("",!0),n.data.refUnit!=null?(l(),r(i,{key:1,dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{"return-object":!0,items:n.data.refUnit.units,"item-title":"name",modelValue:n.record.unit,"onUpdate:modelValue":[e[0]||(e[0]=u=>n.record.unit=u),e[1]||(e[1]=u=>y.changeUnit(n.record,n.data,this))],label:"Untuk "+n.record.targetable_type_key+" Dari Unit"},null,8,["items","modelValue","label"])]),_:1})]),_:1})):m("",!0),s(i,{dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{items:_.jenisHubungan,"return-object":!1,modelValue:n.record.jenis,"onUpdate:modelValue":[e[2]||(e[2]=u=>n.record.jenis=u),e[3]||(e[3]=u=>y.changeDocumentType(n.record,n.data))],label:"Apakah Dokumen Terhubung Dengan Asset Dari Unit Ini?"},null,8,["items","modelValue"])]),_:1})]),_:1}),n.record.jenis=="Iya"?(l(),c("div",H,[n.data.refAssetType!=null?(l(),r(i,{key:0,dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{items:n.data.refAssetType,"item-title":"name","return-object":!1,modelValue:n.record.asset.assetable_type_key,"onUpdate:modelValue":[e[4]||(e[4]=u=>n.record.asset.assetable_type_key=u),e[5]||(e[5]=u=>y.changeAssetType(n.record,n.data))],label:"Pilih Jenis Asset"},null,8,["items","modelValue"])]),_:1})]),_:1})):m("",!0),n.data.refAsset!=null&&n.data.refAsset.assets!=null&&n.data.refAsset.assets.length>0?(l(),r(i,{key:1,dense:""},{default:a(()=>[s(d,{cols:"6"},{default:a(()=>[s(o,{items:n.data.refAsset.assets,"return-object":!1,readonly:!0,modelValue:n.record.asset.name,"onUpdate:modelValue":e[6]||(e[6]=u=>n.record.asset.name=u),label:"Nama Asset"},null,8,["items","modelValue"])]),_:1}),s(d,{cols:"6"},{default:a(()=>[s(o,{items:n.data.refAsset.assets_slugs_combos,"return-object":!1,modelValue:n.record.asset.slug,"onUpdate:modelValue":[e[7]||(e[7]=u=>n.record.asset.slug=u),e[8]||(e[8]=u=>y.changeAsset(n.record,n.data,this))],label:"Slug Asset"},null,8,["items","modelValue"])]),_:1})]),_:1})):m("",!0),n.data.refAsset!=null&&n.data.refAsset.assets!=null&&n.data.refAsset.assets.length<=0?(l(),r(i,{key:2,dense:""},{default:a(()=>[s(A,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",disabled:!0},{default:a(()=>e[12]||(e[12]=[b("Tidak Ditemukan Asset")])),_:1})]),_:1})):m("",!0)])):m("",!0),n.data.refDocument!=null&&n.data.refDocument.documents!=null&&n.data.refDocument.documents.length>0?(l(),r(i,{key:3,dense:""},{default:a(()=>[s(d,{cols:"6"},{default:a(()=>[s(o,{"return-object":!1,readonly:!0,modelValue:n.record.document.name,"onUpdate:modelValue":e[9]||(e[9]=u=>n.record.document.name=u),label:"Nama Document"},null,8,["modelValue"])]),_:1}),s(d,{cols:"6"},{default:a(()=>[s(o,{items:n.data.refDocument.documents_ids_combos,"return-object":!1,modelValue:n.record.document.id,"onUpdate:modelValue":[e[10]||(e[10]=u=>n.record.document.id=u),e[11]||(e[11]=u=>y.changeDocument(n.record,n.data))],label:"Id Document"},null,8,["items","modelValue"])]),_:1})]),_:1})):m("",!0),n.data.refDocument!=null&&n.data.refDocument.documents!=null&&n.data.refDocument.documents.length<=0?(l(),r(i,{key:4,dense:""},{default:a(()=>[s(A,{class:"mt-2",color:"teal-darken-4",block:"",variant:"flat",disabled:!0},{default:a(()=>e[13]||(e[13]=[b("Tidak Ditemukan Dokumen")])),_:1})]),_:1})):m("",!0)],64)}const L=k(w,[["render",J]]),z={name:"infrastructure-record-edit",components:{Asset:S,Document:L,Log:N,Periodic:C},data(){return{refUnit:void 0,refAssetType:void 0,refAsset:void 0,refDocument:void 0,initEditBool:!1}},methods:{initEdit:function(t,e){e.getRefUnit(t,e),e.getRefAssetType(t,e),(t.targetable_type_key=="Asset"||t.targetable_type_key=="Document")&&e.getRefAsset(t,e),t.targetable_type_key=="Document"&&e.getRefDocument(t,e),e.initEditBool=!0},changeMaintenaceType:function(t,e){},changeTargetType:function(t,e){e.refAsset=void 0,e.refDocument=void 0,t.asset!=null?(t.asset={assetable_type_key:t.asset.assetable_type_key},e.getRefAsset(t,e)):t.asset={},t.document={}},getRefUnit:function(t,e){e.refAssetType==null&&(e.refUnit={},this.$http("infrastructure/api/ref-unit/combos").then(n=>{e.refUnit=n}))},getRefAssetType:function(t,e){e.refAssetType==null&&(e.refAssetType=[],this.$http("infrastructure/api/ref-asset/type").then(n=>{e.refAssetType=n}))},getRefAsset:function(t,e){t.unit==null||t.asset==null||t.asset.assetable_type_key==null||(e.refAsset=[],this.$http(`infrastructure/api/ref-asset/${t.unit.id}/${t.asset.assetable_type_key}/asset`).then(n=>{e.refAsset=n}))},getRefDocument:function(t,e){t.jenis=="Iya"&&e.getRefDocumentAsset(t,e),t.jenis=="Tidak"&&e.getRefDocummentUnit(t,e)},getRefDocummentUnit:function(t,e){t.unit!=null&&this.$http(`infrastructure/api/ref-document/combos/unit/${t.unit.id}`).then(n=>{e.refDocument=n})},getRefDocumentAsset:function(t,e){t.unit==null||t.asset==null||this.$http(`infrastructure/api/ref-document/combos/unit/${t.unit.id}/asset/${t.asset.id}`).then(n=>{e.refDocument=n})}}},K={key:0};function M(t,e,n,V,_,y){const u=I("form-edit");return l(),r(u,{"with-helpdesk":""},{default:a(({combos:{morph_type:W,morph_type_keys:h,morph_target:q,morph_target_keys:x},record:f})=>[s(B,null,{default:a(()=>[_.initEditBool?m("",!0):(l(),c("div",K,v(y.initEdit(f,this)),1)),s(i,{dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(D,{label:"Name",modelValue:f.name,"onUpdate:modelValue":g=>f.name=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s(i,{dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(D,{label:"Deskripsi",modelValue:f.description,"onUpdate:modelValue":g=>f.description=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e[0]||(e[0]=T("div",{class:"text-overline mt-6"},"Tipe Record",-1)),s(U,{thickness:3,class:"mt-3 mb-6"}),s(i,{dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{label:"Tipe Record",disabled:!0,"return-object":!1,items:h,modelValue:f.recordable_type_key,"onUpdate:modelValue":g=>f.recordable_type_key=g},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),(l(),r(R(f.recordable_type_key),{record:f,data:this},null,8,["record"])),e[1]||(e[1]=T("div",{class:"text-overline mt-6"},"Tujuan Record",-1)),s(U,{thickness:3,class:"mt-3 mb-6"}),s(i,{dense:""},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(o,{items:x,"return-object":!1,label:"Record Untuk",modelValue:f.targetable_type_key,"onUpdate:modelValue":[g=>f.targetable_type_key=g,g=>y.changeTargetType(f,this)]},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),(l(),r(R(f.targetable_type_key),{record:f,data:this},null,8,["record"]))]),_:2},1024)]),_:1})}const X=k(z,[["render",M]]);export{X as default};
